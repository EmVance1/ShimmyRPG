{
    "label": "Shimmy's Shack",
    "scripts": [
        "scripts/ShimmyIntroScene.lua"
    ],
    "tracks": [
        "tavern_simple.optimism"
    ],
    "triggers": [
        {
            // front door
            "rect": [ 1.2, 4, 1.2, 0.3 ],
            "act_portal": { "index": 1, "spawnpos": [ 0.3, -1.8 ] },
            "condition": "!Ademmar.CurfewInPlace"
        },
        {
            // welcome cutscene
            "rect": [ 0, -1.2, 4, 3.5 ],
            "act_event": "OnShimmyIntroCutsceneTriggered",
            "condition": "once",
        },
        {
            // behind bar
            "rect": [ 0.45, -1.2, 3.55, 0.9 ],
            "act_dia": "speech/ShimmyBehindBar.shmy",
        },
        {
            // curfew blocker
            "rect": [ 1.2, 4, 1.2, 0.3 ],
            "act_popup": "There is a curfew in place. It is unwise to go outside.",
            "condition": "Ademmar.CurfewInPlace"
        }
    ],
    "entities": [
        {
            "name": "Stanza", "texture": "NPC_placeholder.player", "position": { "world": [ 2, 3.8 ] }, "tags": [],
            "trait_scriptable": { "id": "player" },
            "trait_playable": { "active": true },
            "trait_movement": { "speed": 1.3 },

            // speculative, better composability
            "trait_inventory": { "id": "player_inventory" },
        },
        {
            "name": "Shimmy", "texture": "NPC_placeholder.friendly", "position": { "world": [ 2, -0.8 ] }, "tags": [ "shimmy_staff" ],
            "trait_scriptable": { "id": "ShimmyPrime" },
            "trait_movement": { "speed": 1.0 },
            "trait_speech": { "source": "speech/ShimmyDialogue.shmy" },

            // speculative, should ensure no overlapping entity instances
            "trait_variant": { "npc": "Shimmy", "version": "prime" },
        },
        {
            "name": "Brian", "texture": "NPC_placeholder.friendly", "position": { "world": [ 3.5, 1 ] }, "tags": [ "shimmy_customer" ],
            "trait_scriptable": { "id": "BrianPrime" },
            "trait_movement": { "speed": 1.0 },
            "trait_speech": { "source": "speech/BrianDialogue.shmy" }
        },
        {
            "name": "Sally", "texture": "NPC_placeholder.neutral", "position": { "world": [ 2.2, 0 ] }, "tags": [ "shimmy_customer" ],
            "trait_scriptable": { "id": "Sally" },
            "trait_movement": { "speed": 1.0 },
            "trait_speech": { "source": "This curfew nonsense is a bad fucking joke..." }
        },
        {
            "name": "Bill", "texture": "NPC_placeholder.neutral", "position": { "world": [ 2.8, 0 ] }, "tags": [ "shimmy_customer" ],
            "trait_scriptable": { "id": "Bill" },
            "trait_movement": { "speed": 1.0 },
            "trait_speech": { "source": "Shimmy really knows how to brew a strong drink." }
        },
        {
            "name": "Table", "texture": "tavern_simple.table_long", "position": { "iso": [ 558, 478 ] }, "tags": [ "furniture" ],
            "trait_customsort": [ [0, 265], [378, 110] ],

            // speculative
            "trait_breakable": { "hp": 20, "material": "wood" },
            "trait_pickup": { "item_id": "table_long" },
        },

        // current prop system is more or less exactly instancing behaviour i want. speculative structure:
        /*
        // fully featured entity with every bell and whistle *available* (composable). may or may not be playable
        {
            "character": "player", "position": { "world": [ 0, 0 ] }
        },

        // basically characters that can be duplicated. strictly non-playable. generally spawned from scripts, not authored
        {
            "mob": "spider", "position": { "world": [ 0, 0 ] }
        },

        // props cannot speak or pathfind, may have inventory (boxes)
        {
            "prop": "table_simple_wooden_round", "position": { "iso": [ 737, 749 ] }
            "trait_examine": { "file": "speech/table.shmy" },
        },

        // scenery is just a sprite. foliage, dynamic backgrounds etc.
        {
            "scenery": "berry_bush_small", "position": { "iso": [ 737, 749 ] }
        },
        */

        {
            "prop": "table_simple_wooden_round", "position": { "iso": [ 737, 749 ] },
            "trait_examine": { "file": "speech/table.shmy" },
        },
        {
            "prop": "table_simple_wooden_round", "position": { "iso": [ 959, 649 ] }
        },
        {
            "prop": "table_simple_wooden_round", "position": { "iso": [ 909, 870 ] }
        },
        {
            "prop": "table_simple_wooden_round", "position": { "iso": [ 1114, 790 ] }
        },
        {
            "prop": "door_simple_wooden_single", "position": { "iso": [ 1060, 273 ] }, "tags": [ "locked", "-y" ]
        }
    ]
}
